
<div class="card shadow-sm border-secondary" style="margin: 10px;">
    <div class="card-header py-3 text-white bg-secondary">
        <div class="container-fluid d-flex align-items-center">
            <h4 class="my-0 fw-normal">{{ actuator.actuator_name() }}</h4>
            <h4 class="my-0 fw-normal ms-auto">Pin {{actuator.port}}</h4>
        </div>
    </div>
    <div class="card-body">
        <div class="container">
            <div class="row" style="margin-top: 20px;">
                <div class="col">
                    
                </div>
                <div class="col">
                    <svg width="100px" height="70px" viewBox="0 0 100 70" version="1.1"
                         xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <title id="relayTitleId{{actuator.id}}">Relay off</title>
                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g id="Artboard" transform="translate(-38.000000, -48.000000)">
                                <g id="relay" transform="translate(38.000000, 48.000000)">
                                    <g id="Group" transform="translate(0.000000, 8.048780)" fill="#000000">
                                        <g id="Coil" transform="translate(1.800000, 0.000000)" stroke="#000000">
                                            <path d="M34.6652288,0 C30.2799974,0.000716979501 26.7251751,7.25114198 26.7249115,16.1951014 C26.7256647,16.5616279 26.732518,16.9279965 26.7454597,17.2935745 L29.6325367,17.2935745 C29.603894,17.0663725 29.5787654,16.8373106 29.5571897,16.606744 C29.527386,16.2468027 29.5062389,15.8839824 29.4938277,15.5196416 C29.4854396,15.2615087 29.4814421,15.0028379 29.4818427,14.7441155 C29.4816482,14.3788099 29.4902217,14.0137125 29.5075312,13.6501907 C29.5251117,13.2868306 29.5513999,12.9255284 29.5862975,12.5676366 C29.6211462,12.2093075 29.6645807,11.854836 29.7164381,11.5055519 C29.7681183,11.156872 29.8281264,10.8137873 29.8962381,10.4775803 C29.9647693,10.1407973 30.0413516,9.81137364 30.1256976,9.49054651 C30.2094893,9.1696531 30.3009306,8.85768848 30.3996787,8.55582108 C30.4988128,8.25459717 30.6051131,7.96388558 30.7181816,7.68477469 C30.8310061,7.405681 30.9504511,7.13850026 31.0760703,6.88423089 C31.2020488,6.62955955 31.3340675,6.38818459 31.4716307,6.16101205 C31.6091423,5.93400684 31.7520193,5.72147579 31.8997261,5.52421584 C32.0470977,5.32657983 32.1991184,5.14441084 32.3552195,4.97839052 C32.5119183,4.81239073 32.672513,4.66285908 32.8363988,4.53035847 C32.9996336,4.39791614 33.1659421,4.28254298 33.3347026,4.18467026 C33.5039207,4.08726214 33.6753733,4.00756254 33.8484169,3.94587066 C34.0207777,3.88389961 34.194515,3.83987576 34.3689811,3.81396317 C34.4932198,3.79566163 34.6177313,3.78655783 34.7422802,3.78666899 C34.9172702,3.78669367 35.0921505,3.80490855 35.266269,3.8412457 C35.4409935,3.87769374 35.6147325,3.93234469 35.7868332,4.0049933 C35.9589921,4.07740267 36.1293023,4.16772825 36.2971238,4.27563067 C36.4644083,4.38353688 36.6290019,4.50877794 36.7902899,4.65088601 C36.9515484,4.79358936 37.109284,4.95298699 37.262907,5.12848288 C37.4169285,5.30306792 37.5666635,5.49358677 37.7115514,5.69932592 C37.8566331,5.90594971 37.9966534,6.12758997 38.1310854,6.36341281 C38.2648204,6.59861858 38.3928375,6.847582 38.514659,7.10937408 C38.6370516,7.37154796 38.7530679,7.64632092 38.8622723,7.93266148 C38.9715218,8.21899024 39.0738219,8.51653383 39.1687884,8.82417501 C39.2630949,9.13182869 39.3499639,9.44910644 39.4290705,9.77482165 C39.5089312,10.0999261 39.5809412,10.4331438 39.6448309,10.7732273 C39.70848,11.1136897 39.7639163,11.4605703 39.8109318,11.8125695 C39.8577037,12.1646656 39.8959949,12.5214138 39.925662,12.8814777 C39.9554657,13.2414186 39.9766127,13.6042385 39.989024,13.968579 C39.9979854,14.2266699 40.0025561,14.4853411 40.0027274,14.7441062 C40.0023539,15.1094713 39.9932097,15.4745688 39.9753293,15.838031 C39.9577849,16.2021533 39.9314965,16.5642164 39.896563,16.9228592 C39.8821906,17.0469795 39.8667781,17.170567 39.8503325,17.2935745 L42.5798697,17.2935745 C42.5950975,16.9281457 42.6042354,16.5617769 42.6072678,16.1950921 C42.6072678,11.8994145 41.7703038,7.77979717 40.2808671,4.74259276 C38.7914304,1.70538835 36.771414,-0.000585681312 34.6652394,0 L34.6652288,0 Z" id="Path" stroke-width="1.00027776" fill-rule="nonzero" stroke-linejoin="round"></path>
                                            <path d="M48.2653954,9.31541879e-06 C43.8801641,0.000717275729 40.3253419,7.25114219 40.3250783,16.1951014 C40.3258323,16.5616279 40.3326865,16.9279966 40.3456291,17.2935745 L43.2327059,17.2935745 C43.2040632,17.0663725 43.1789345,16.8373106 43.1573589,16.606744 C43.1275552,16.2468027 43.1064081,15.8839824 43.0939969,15.5196416 C43.0856088,15.2615087 43.0816113,15.0028379 43.0820119,14.7441155 C43.0818173,14.3788099 43.0903909,14.0137125 43.1077003,13.6501907 C43.1252808,13.2868306 43.1515691,12.9255284 43.1864666,12.5676366 C43.2213154,12.2093075 43.2647499,11.854836 43.3166072,11.5055519 C43.3682875,11.156872 43.4282956,10.8137873 43.4964073,10.4775803 C43.5649385,10.1407973 43.6415208,9.81137364 43.7258667,9.49054651 C43.8096585,9.1696531 43.9010997,8.85768848 43.9998479,8.55582108 C44.0989819,8.25459717 44.2052822,7.96388558 44.3183508,7.68477469 C44.4311753,7.405681 44.5506203,7.13850026 44.6762394,6.88423089 C44.802218,6.62955955 44.9342366,6.38818459 45.0717999,6.16101205 C45.2093115,5.93400684 45.3521885,5.72147579 45.4998952,5.52421584 C45.6472668,5.32657983 45.7992876,5.14441084 45.9553887,4.97839052 C46.1120875,4.81239073 46.2726821,4.66285908 46.436568,4.53035847 C46.5998027,4.39791614 46.7661112,4.28254298 46.9348718,4.18467026 C47.1040898,4.08726214 47.2755425,4.00756254 47.4485861,3.94587066 C47.6209469,3.88389961 47.7946841,3.83987576 47.9691503,3.81396317 C48.093389,3.79566163 48.2179005,3.78655783 48.3424494,3.78666899 C48.5174393,3.78669367 48.6923197,3.80490855 48.8664382,3.8412457 C49.0411627,3.87769374 49.2149016,3.93234469 49.3870024,4.0049933 C49.5591613,4.07740267 49.7294715,4.16772825 49.897293,4.27563067 C50.0645774,4.38353688 50.2291711,4.50877794 50.3904591,4.65088601 C50.5517176,4.79358936 50.7094532,4.95298699 50.8630761,5.12848288 C51.0170976,5.30306792 51.1668327,5.49358677 51.3117205,5.69932592 C51.4568023,5.90594971 51.5968225,6.12758997 51.7312545,6.36341281 C51.8649895,6.59861858 51.9930067,6.847582 52.1148282,7.10937408 C52.2372208,7.37154796 52.353237,7.64632092 52.4624414,7.93266148 C52.571691,8.21899024 52.6739911,8.51653383 52.7689575,8.82417501 C52.8632641,9.13182869 52.9501331,9.44910644 53.0292396,9.77482165 C53.1091003,10.0999261 53.1811103,10.4331438 53.245,10.7732273 C53.3086492,11.1136897 53.3640854,11.4605703 53.411101,11.8125695 C53.4578729,12.1646656 53.4961641,12.5214138 53.5258312,12.8814777 C53.5556349,13.2414186 53.5767819,13.6042385 53.5891931,13.968579 C53.5981546,14.2266699 53.6027253,14.4853411 53.6028966,14.7441062 C53.6025232,15.1094744 53.593379,15.4745751 53.5754985,15.8380403 C53.5579541,16.2021626 53.5316657,16.5642257 53.4967322,16.9228685 C53.4823598,17.0469888 53.4669473,17.1705763 53.4505017,17.2935745 L56.1800389,17.2935745 C56.1952637,16.9281549 56.2043988,16.561786 56.2074282,16.1951014 C56.2074282,11.8994238 55.3704642,7.77980649 53.8810275,4.74260207 C52.3915908,1.70539766 50.3715744,-0.000576365893 48.2653998,9.31541879e-06 L48.2653954,9.31541879e-06 Z" id="Path" stroke-width="1.00027776" fill-rule="nonzero" stroke-linejoin="round"></path>
                                            <path d="M61.8783956,9.31541879e-06 C57.4931643,0.000717275729 53.9383421,7.25114219 53.9380786,16.1951014 C53.9388326,16.5616279 53.9456868,16.9279966 53.9586294,17.2935745 L56.8457061,17.2935745 C56.8170634,17.0663725 56.7919348,16.8373106 56.7703591,16.606744 C56.7405554,16.2468027 56.7194084,15.8839824 56.7069971,15.5196416 C56.698609,15.2615087 56.6946115,15.0028379 56.6950121,14.7441155 C56.6948176,14.3788099 56.7033911,14.0137125 56.7207006,13.6501907 C56.7382811,13.2868306 56.7645693,12.9255284 56.7994669,12.5676366 C56.8343156,12.2093075 56.8777501,11.854836 56.9296075,11.5055519 C56.9812877,11.156872 57.0412958,10.8137873 57.1094075,10.4775803 C57.1779387,10.1407973 57.2545211,9.81137364 57.338867,9.49054651 C57.4226588,9.1696531 57.5141,8.85768848 57.6128481,8.55582108 C57.7119822,8.25459717 57.8182825,7.96388558 57.931351,7.68477469 C58.0441755,7.405681 58.1636205,7.13850026 58.2892397,6.88423089 C58.4152182,6.62955955 58.5472369,6.38818459 58.6848001,6.16101205 C58.8223117,5.93400684 58.9651888,5.72147579 59.1128955,5.52421584 C59.2602671,5.32657983 59.4122879,5.14441084 59.5683889,4.97839052 C59.7250878,4.81239073 59.8856824,4.66285908 60.0495683,4.53035847 C60.212803,4.39791614 60.3791115,4.28254298 60.5478721,4.18467026 C60.7170901,4.08726214 60.8885427,4.00756254 61.0615863,3.94587066 C61.2339472,3.88389961 61.4076844,3.83987576 61.5821505,3.81396317 C61.7063892,3.79566163 61.8309007,3.78655783 61.9554497,3.78666899 C62.1304396,3.78669367 62.30532,3.80490855 62.4794384,3.8412457 C62.654163,3.87769374 62.8279019,3.93234469 63.0000026,4.0049933 C63.1721615,4.07740267 63.3424717,4.16772825 63.5102932,4.27563067 C63.6775777,4.38353688 63.8421713,4.50877794 64.0034593,4.65088601 C64.1647178,4.79358936 64.3224535,4.95298699 64.4760764,5.12848288 C64.6300979,5.30306792 64.7798329,5.49358677 64.9247208,5.69932592 C65.0698025,5.90594971 65.2098228,6.12758997 65.3442548,6.36341281 C65.4779898,6.59861858 65.6060069,6.847582 65.7278284,7.10937408 C65.850221,7.37154796 65.9662373,7.64632092 66.0754417,7.93266148 C66.1846912,8.21899024 66.2869913,8.51653383 66.3819578,8.82417501 C66.4762644,9.13182869 66.5631334,9.44910644 66.6422399,9.77482165 C66.7221006,10.0999261 66.7941106,10.4331438 66.8580003,10.7732273 C66.9216495,11.1136897 66.9770857,11.4605703 67.0241013,11.8125695 C67.0708731,12.1646656 67.1091643,12.5214138 67.1388314,12.8814777 C67.1686351,13.2414186 67.1897822,13.6042385 67.2021934,13.968579 C67.2111549,14.2266699 67.2157255,14.4853411 67.2158968,14.7441062 C67.2155234,15.1094744 67.2063793,15.4745751 67.1884987,15.8380403 C67.1709543,16.2021626 67.144666,16.5642257 67.1097324,16.9228685 C67.0953601,17.0469888 67.0799475,17.1705763 67.0635019,17.2935745 L69.7930391,17.2935745 C69.808264,16.9281549 69.817399,16.561786 69.8204285,16.1951014 C69.8204285,11.8994238 68.9834644,7.77980649 67.4940278,4.74260207 C66.0045911,1.70539766 63.9845746,-0.000576365893 61.8784,9.31541879e-06 L61.8783956,9.31541879e-06 Z" id="Path" stroke-width="1.00027776" fill-rule="nonzero" stroke-linejoin="round"></path>
                                            <polyline id="Path" stroke-width="3.449638" stroke-linecap="square" points="0 16.0743902 27 16.0743902 27 16.0743902 27 16.0743902 27 16.0743902"></polyline>
                                            <polyline id="Path-Copy" stroke-width="3.45" stroke-linecap="square" points="69.3412154 16.0743902 96.4412154 16.0743902 96.4412154 16.0743902 96.4412154 16.0743902 96.4412154 16.0743902"></polyline>
                                        </g>
                                        <g id="relay_open{{actuator.id}}" transform="translate(0.000000, 33.170732)" fill-rule="nonzero">
                                            <path d="M39.250709,0.036993145 C36.5409268,-0.279344691 34.0160538,1.46318254 33.3453935,4.11251418 L0,4.14634146 L0,6.82926829 L33.4385858,6.91350179 C34.1289886,9.22493605 36.2491483,10.8104375 38.6573559,10.8162112 C39.9623614,10.8088356 41.2204787,10.3278685 42.1986641,9.46240051 L58.1531896,20.7317073 L59.7560976,18.4442341 L43.7736143,7.14691742 C43.9695968,6.5730598 44.0672734,5.97012212 44.0625105,5.36362198 C44.017822,2.63078109 41.9604912,0.353330981 39.250709,0.036993145 Z M38.6200789,8.01522358 C37.1583679,8.01522358 35.973417,6.82806111 35.973417,5.36362198 C35.973417,3.89918286 37.1583679,2.71202038 38.6200789,2.71202038 C40.08179,2.71202038 41.2667409,3.89918286 41.2667409,5.36362198 C41.2667409,6.82079964 40.0931444,8.00496177 38.6387174,8.01522358 L38.6200789,8.01522358 Z" id="Shape"></path>
                                            <path d="M100,4.14634146 L69.6976868,4.12347239 C69.0687317,1.5026095 66.5776027,-0.249323806 63.8756306,0.0290019564 C61.1736586,0.307327719 59.0987544,2.52960071 59.0263399,5.22271055 C58.9539255,7.91582039 60.9064572,10.2446045 63.5896322,10.6653479 C66.2728071,11.0860913 68.8545435,9.46831689 69.6234482,6.88442233 L100,6.82926829 L100,4.14634146 Z M64.4081865,7.97039598 C62.9526565,7.97039598 61.7727162,6.80020295 61.7727162,5.3566967 C61.7727162,3.91319045 62.9526565,2.74299742 64.4081865,2.74299742 C65.8637166,2.74299742 67.0436569,3.91319045 67.0436569,5.3566967 C67.0386624,6.79098414 65.8729092,7.95530668 64.4267462,7.97039598 L64.4081865,7.97039598 Z" id="Shape"></path>
                                        </g>
                                        <g id="relay_closed{{actuator.id}}" transform="translate(0.000000, 33.170732)" fill-rule="nonzero"
                                           visibility="hidden">
                                            <path d="M39.250709,0.036993145 C36.5409268,-0.279344691 34.0160538,1.46318254 33.3453935,4.11251418 L0,4.14634146 L0,6.82926829 L33.4385858,6.91350179 C34.1289886,9.22493605 36.2491483,10.8104375 38.6573559,10.8162112 C39.9623614,10.8088356 42.9268293,9.75609756 43.6585366,6.82926829 L59.7560976,6.82926829 L59.7560976,4.14634146 L43.6585366,4.14634146 C43.6585366,2.43902439 41.9604912,0.353330981 39.250709,0.036993145 Z M38.6200789,8.01522358 C37.1583679,8.01522358 35.973417,6.82806111 35.973417,5.36362198 C35.973417,3.89918286 37.1583679,2.71202038 38.6200789,2.71202038 C40.08179,2.71202038 41.2667409,3.89918286 41.2667409,5.36362198 C41.2667409,6.82079964 40.0931444,8.00496177 38.6387174,8.01522358 L38.6200789,8.01522358 Z" id="Shape"></path>
                                            <path d="M100,4.14634146 L69.6976868,4.12347239 C69.0687317,1.5026095 66.5776027,-0.249323806 63.8756306,0.0290019564 C61.1736586,0.307327719 59.0987544,2.52960071 59.0263399,5.22271055 C58.9539255,7.91582039 60.9064572,10.2446045 63.5896322,10.6653479 C66.2728071,11.0860913 68.8545435,9.46831689 69.6234482,6.88442233 L100,6.82926829 L100,4.14634146 Z M64.4081865,7.97039598 C62.9526565,7.97039598 61.7727162,6.80020295 61.7727162,5.3566967 C61.7727162,3.91319045 62.9526565,2.74299742 64.4081865,2.74299742 C65.8637166,2.74299742 67.0436569,3.91319045 67.0436569,5.3566967 C67.0386624,6.79098414 65.8729092,7.95530668 64.4267462,7.97039598 L64.4081865,7.97039598 Z" id="Shape"></path>
                                        </g>
                                    </g>
                                    <rect id="Rectangle" stroke="#000000" stroke-width="3" x="11.5" y="1.5" width="77" height="67"></rect>
                                </g>
                            </g>
                        </g>
                    </svg>
                </div>
            </div>
        </div>
    </div>
    <div class="card-footer">
        <div class="container">
            <div class="row">
                <div class="col">
                    <button id="actuator_delete_button{{actuator.id}}" class="w-100 btn btn-lg btn-danger">Delete</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        window.addEventListener("DOMContentLoaded", function () {
            var delete_button = document.getElementById("actuator_delete_button{{actuator.id}}")
            var relay_closed = document.getElementById("relay_closed{{actuator.id}}")
            var relay_open = document.getElementById("relay_open{{actuator.id}}")
            var relay_title = document.getElementById("relayTitleId{{actuator.id}}")

            delete_button.addEventListener("click", function(){
                var payload = {
                    "port": "{{actuator.id}}"
                }

                var xhr = new XMLHttpRequest();
                var url = "./delete_actuator";
                xhr.open("POST", url, false);
                xhr.setRequestHeader("Content-Type", "application/json");
                var data = JSON.stringify(payload);
                xhr.send(data);
                location.reload();
            });

            var socket = io();
            socket.on('actuator_change{{actuator.id}}', function(data) {
                if (data.value){
                    relay_open.style.visibility = "hidden"
                    relay_closed.style.visibility = "visible"
                    relay_title.innerHTML = "Relay on"
                } else {
                    relay_open.style.visibility = "visible"
                    relay_closed.style.visibility = "hidden"
                    relay_title.innerHTML = "Relay off"
                }

                console.log('actuator change received');
                console.log(data);
            });
        })
    </script>
</div>